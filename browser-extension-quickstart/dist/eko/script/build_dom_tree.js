function get_clickable_elements(t=!0,e){window.clickable_elements={};let n=parse_node(build_dom_tree(t)),i=create_selector_map(n);return{element_str:clickable_elements_to_string(n,e),selector_map:i}}function get_highlight_element(t){return window.clickable_elements[t]}function remove_highlight(){let t=document.getElementById("playwright-highlight-container");t&&t.remove()}function clickable_elements_to_string(t,e){e||(e=["id","title","type","name","role","tabindex","aria-label","placeholder","value","alt","aria-expanded"]);let n=[];return function t(i,o){if(null==i.text){if(null!=i.highlightIndex){let t="";if(e){for(let n=0;n<e.length;n++){let o=e[n],l=i.attributes[o];o&&l&&(t+=` ${o}="${l}"`)}t=t.replace(/\n+/g," ")}let o=function(t){let e=[];return function n(i){if(!i.tagName||i==t||null==i.highlightIndex)if(!i.tagName&&i.text)e.push(i.text);else if(i.tagName)for(let t=0;t<i.children.length;t++)n(i.children[t])}(t),e.join("\n").trim().replace(/\n+/g," ")}(i);n.push(`[${i.highlightIndex}]:<${i.tagName}${t}>${o}</${i.tagName}>`)}for(let e=0;e<i.children.length;e++)t(i.children[e],o+1)}else(function(t){let e=t.parent;for(;e;){if(null!=e.highlightIndex)return!0;e=e.parent}return!1})(i)||n.push(`[]:${i.text}`)}(t,0),n.join("\n")}function create_selector_map(t){let e={};return function t(n){if(n.tagName){null!=n.highlightIndex&&(e[n.highlightIndex]=n);for(let e=0;e<n.children.length;e++)t(n.children[e])}}(t),e}function parse_node(t,e){if(!t)return;if("TEXT_NODE"==t.type)return{text:t.text||"",isVisible:t.isVisible||!1,parent:e};let n={tagName:t.tagName,xpath:t.xpath,highlightIndex:t.highlightIndex,attributes:t.attributes||{},isVisible:t.isVisible||!1,isInteractive:t.isInteractive||!1,isTopElement:t.isTopElement||!1,shadowRoot:t.shadowRoot||!1,children:[],parent:e};if(t.children){let e=[];for(let i=0;i<t.children.length;i++){let o=t.children[i];if(o){let t=parse_node(o,n);t&&e.push(t)}}n.children=e}return n}function build_dom_tree(t){let e=0;function n(t,e=!0){const n=[];let i=t;for(;i&&i.nodeType===Node.ELEMENT_NODE&&(!e||!(i.parentNode instanceof ShadowRoot||i.parentNode instanceof HTMLIFrameElement));){let t=0,e=i.previousSibling;for(;e;)e.nodeType===Node.ELEMENT_NODE&&e.nodeName===i.nodeName&&t++,e=e.previousSibling;const o=i.nodeName.toLowerCase(),l=t>0?`[${t+1}]`:"";n.unshift(`${o}${l}`),i=i.parentNode}return n.join("/")}return function i(o,l=null){if(!o)return null;if(o.nodeType===Node.TEXT_NODE){const t=o.textContent.trim();return t&&function(t){const e=document.createRange();e.selectNodeContents(t);const n=e.getBoundingClientRect();return 0!==n.width&&0!==n.height&&n.top>=0&&n.top<=window.innerHeight&&t.parentElement?.checkVisibility({checkOpacity:!0,checkVisibilityCSS:!0})}(o)?{type:"TEXT_NODE",text:t,isVisible:!0}:null}if(o.nodeType===Node.ELEMENT_NODE&&(r=o,new Set(["svg","script","style","link","meta"]).has(r.tagName.toLowerCase())))return null;var r;const a={tagName:o.tagName?o.tagName.toLowerCase():null,attributes:{},xpath:o.nodeType===Node.ELEMENT_NODE?n(o,!0):null,children:[]};if(o.nodeType===Node.ELEMENT_NODE&&o.attributes){const t=o.getAttributeNames?.()||[];for(const e of t)a.attributes[e]=o.getAttribute(e)}if(o.nodeType===Node.ELEMENT_NODE){const n=function(t){const e=new Set(["a","button","details","embed","input","label","menu","menuitem","object","select","textarea","summary"]),n=new Set(["button","menu","menuitem","link","checkbox","radio","slider","tab","tabpanel","textbox","combobox","grid","listbox","option","progressbar","scrollbar","searchbox","switch","tree","treeitem","spinbutton","tooltip","a-button-inner","a-dropdown-button","click","menuitemcheckbox","menuitemradio","a-button-text","button-text","button-icon","button-icon-only","button-text-icon-only","dropdown","combobox"]),i=t.tagName.toLowerCase(),o=t.getAttribute("role"),l=t.getAttribute("aria-role"),r=t.getAttribute("tabindex");if(e.has(i)||n.has(o)||n.has(l)||null!==r&&"-1"!==r||"a-dropdown-select"===t.getAttribute("data-action")||"a-dropdown-button"===t.getAttribute("data-action"))return!0;const a=window.getComputedStyle(t),c=null!==t.onclick||null!==t.getAttribute("onclick")||t.hasAttribute("ng-click")||t.hasAttribute("@click")||t.hasAttribute("v-on:click"),h=function(t){try{return window.getEventListeners?.(t)||{}}catch(e){const n={},i=["click","mousedown","mouseup","touchstart","touchend","keydown","keyup","focus","blur"];for(const e of i){const i=t[`on${e}`];i&&(n[e]=[{listener:i,useCapture:!1}])}return n}}(t),s=h&&(h.click?.length>0||h.mousedown?.length>0||h.mouseup?.length>0||h.touchstart?.length>0||h.touchend?.length>0),d=t.hasAttribute("aria-expanded")||t.hasAttribute("aria-pressed")||t.hasAttribute("aria-selected")||t.hasAttribute("aria-checked"),u=(void 0!==t.form||t.hasAttribute("contenteditable")||a.userSelect,t.draggable||"true"===t.getAttribute("draggable"));return d||c||s||u}(o),i=function(t){const e=window.getComputedStyle(t);return t.offsetWidth>0&&t.offsetHeight>0&&"hidden"!==e.visibility&&"none"!==e.display}(o),r=function(t){if(t.ownerDocument!==window.document)return!0;const e=t.getRootNode();if(e instanceof ShadowRoot){const n=t.getBoundingClientRect(),i={x:n.left+n.width/2,y:n.top+n.height/2};try{const n=e.elementFromPoint(i.x,i.y);if(!n)return!1;let o=n;for(;o&&o!==e;){if(o===t)return!0;o=o.parentElement}return!1}catch(t){return!0}}const n=t.getBoundingClientRect(),i={x:n.left+n.width/2,y:n.top+n.height/2};try{const e=document.elementFromPoint(i.x,i.y);if(!e)return!1;let n=e;for(;n&&n!==document.documentElement;){if(n===t)return!0;n=n.parentElement}return!1}catch(t){return!0}}(o);a.isInteractive=n,a.isVisible=i,a.isTopElement=r,n&&i&&r&&(a.highlightIndex=e++,window.clickable_elements[a.highlightIndex]=o,t&&function(t,e,n=null){let i=document.getElementById("playwright-highlight-container");i||(i=document.createElement("div"),i.id="playwright-highlight-container",i.style.position="fixed",i.style.pointerEvents="none",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%",i.style.zIndex="2147483647",document.documentElement.appendChild(i));const o=["#FF0000","#00FF00","#0000FF","#FFA500","#800080","#008080","#FF69B4","#4B0082","#FF4500","#2E8B57","#DC143C","#4682B4"],l=o[e%o.length],r=`${l}1A`,a=document.createElement("div");a.style.position="absolute",a.style.border=`2px solid ${l}`,a.style.pointerEvents="none",a.style.boxSizing="border-box";const c=t.getBoundingClientRect();let h=c.top,s=c.left;if((c.width<window.innerWidth/2||c.height<window.innerHeight/2)&&(a.style.backgroundColor=r),n){const t=n.getBoundingClientRect();h+=t.top,s+=t.left}a.style.top=`${h}px`,a.style.left=`${s}px`,a.style.width=`${c.width}px`,a.style.height=`${c.height}px`;const d=document.createElement("div");d.className="playwright-highlight-label",d.style.position="absolute",d.style.background=l,d.style.color="white",d.style.padding="1px 4px",d.style.borderRadius="4px",d.style.fontSize=`${Math.min(12,Math.max(8,c.height/2))}px`,d.textContent=e;let u=h+2,g=s+c.width-20-2;(c.width<24||c.height<20)&&(u=h-16-2,g=s+c.width-20),u<0&&(u=h+2),g<0&&(g=s+2),g+20>window.innerWidth&&(g=s+c.width-20-2),d.style.top=`${u}px`,d.style.left=`${g}px`,i.appendChild(a),i.appendChild(d),t.setAttribute("browser-user-highlight-id",`playwright-highlight-${e}`)}(o,a.highlightIndex,l))}if(o.shadowRoot&&(a.shadowRoot=!0),o.shadowRoot){const t=Array.from(o.shadowRoot.childNodes).map((t=>i(t,l)));a.children.push(...t)}if("IFRAME"===o.tagName)try{const t=o.contentDocument||o.contentWindow.document;if(t){const e=Array.from(t.body.childNodes).map((t=>i(t,o)));a.children.push(...e)}}catch(t){console.warn("Unable to access iframe:",o)}else{const t=Array.from(o.childNodes).map((t=>i(t,l)));a.children.push(...t)}return a}(document.body)}window.get_clickable_elements=get_clickable_elements,window.get_highlight_element=get_highlight_element,window.remove_highlight=remove_highlight;